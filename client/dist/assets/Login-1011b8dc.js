import{r as i,_ as y,l as q,u as E,b as S,j as s}from"./index-94fca464.js";import{c as b,a as u,u as K,b as Q,o as w}from"./yup-3e96ae65.js";import{e as R,L as A,Q as m}from"./App-ff4ff5eb.js";import{S as C}from"./Stack-046467dd.js";import{b as F,u as d,p as l}from"./queryKeyFactory-17eee966.js";import{j as p}from"./auth-89fb04be.js";const N=i.lazy(()=>y(()=>import("./loginForm-21413d16.js"),["assets/loginForm-21413d16.js","assets/index-94fca464.js","assets/index-61b77ebf.css","assets/Button-cc906282.js","assets/App-ff4ff5eb.js","assets/App-36b8f6be.css","assets/Button-0a6dc675.js","assets/Form-01d6657c.js","assets/index-090fa6c0.js","assets/createWithBsPrefix-2e1af6a5.js","assets/Col-8e5ef79d.js"])),O=i.lazy(()=>y(()=>import("./loader-a290854d.js"),["assets/loader-a290854d.js","assets/index-94fca464.js","assets/index-61b77ebf.css","assets/App-ff4ff5eb.js","assets/App-36b8f6be.css"])),P=b({email:u().trim().email().required("Enter your registered email"),password:u().trim().required()}).required(),$=()=>{const[T,_]=q(p),r=E(),a=R(),n=S(p),{isLoading:f,reset:h,mutateAsync:x}=K({mutationFn:F.login,onSuccess:()=>{r.invalidateQueries({queryKey:d.lists()}),r.invalidateQueries({queryKey:d.details()}),r.invalidateQueries({queryKey:l.lists()}),r.invalidateQueries({queryKey:l.details()})}}),{register:j,handleSubmit:v,formState:{errors:g}}=Q({resolver:w(P),mode:"all"}),L=async t=>{var o,c;try{const e=await x(t);e&&(a("/dashboard"),m.success(e==null?void 0:e.message,{theme:"colored"}),_(e==null?void 0:e.access))}catch(e){m.error((c=(o=e==null?void 0:e.response)==null?void 0:o.data)==null?void 0:c.error,{theme:"colored"})}};return i.useEffect(()=>{let t=!0;return(async()=>{n&&t&&a("/dashboard")})(),()=>{t=!1}},[n,a]),f?s.jsx(O,{}):s.jsxs(C,{className:"col-md-5 mx-auto",children:[s.jsx("h2",{children:"Login to your account"}),s.jsx("div",{children:s.jsxs("p",{children:["New to XZYMOUS? ",s.jsx(A,{to:"/signup",children:"Create an account"})]})}),s.jsx(N,{register:j,handleSubmit:v,onSubmit:L,reset:h,errors:g})]})};export{$ as default};
