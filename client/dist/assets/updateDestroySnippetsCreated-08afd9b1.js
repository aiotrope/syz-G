import{r as v,j as e}from"./index-94fca464.js";import{Q as l,L as c}from"./App-ff4ff5eb.js";import{L as m}from"./ListGroup-528c8029.js";import{B as p}from"./Badge-e5f34967.js";import{a as E}from"./queryKeyFactory-17eee966.js";import"./Nav-e2a94351.js";import"./objectWithoutPropertiesLoose-6c5c234b.js";import"./Button-0a6dc675.js";const B=({user:s,queryClient:a,useMutation:h,postKeys:r,userKeys:o,access:u})=>{var d;const[i,x]=v.useState(null),j={}.VITE_BASE_URL,f=h({mutationFn:async()=>await E.delete(`${j}/api/post/delete/${i}`,{withCredentials:!0,headers:{Authorization:`Bearer ${u}`,"Content-Type":"application/json"}}),onSuccess:()=>{a.removeQueries({queryKey:r.detail(i)}),a.invalidateQueries({queryKey:o.details()}),a.invalidateQueries({queryKey:o.lists()}),a.invalidateQueries({queryKey:r.details()}),a.invalidateQueries({queryKey:r.lists()}),a.invalidateQueries({queryKey:o.detail(s.id)}),l.info(`${i} deleted`,{theme:"colored"})}}),y=async t=>{t.preventDefault();const n=t.target.id;x(n);try{await f.mutateAsync(i)}catch(g){l.error(g.response.data.error,{theme:"colored"})}};return e.jsx(e.Fragment,{children:e.jsx(m,{as:"ul",children:(d=s==null?void 0:s.posts)==null?void 0:d.map(({id:t,title:n})=>e.jsx("div",{children:e.jsxs(m.Item,{as:"li",className:"d-flex justify-content-between align-items-start",children:[e.jsxs("div",{className:"ms-2 me-auto",children:[e.jsx("div",{className:"fw-bold",children:e.jsx(c,{to:`/snippet/${t}`,className:"text-primary",children:n})}),e.jsx(p,{bg:"warning",children:e.jsx(c,{to:`/snippet/update/${t}`,children:"UPDATE"})})]}),e.jsx(p,{bg:"danger",onClick:y,id:t,children:"DELETE"})]})},t))})})};export{B as default};
